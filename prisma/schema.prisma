// ----------------------------------------------
// ğŸ¯ Prisma Schema - Base de donnÃ©es principale
// ----------------------------------------------

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// -----------------------------
// ğŸ” Enum : Statut dâ€™un contact
// -----------------------------
enum ContactStatus {
  PROSPECT
  CLIENT
}

// --------------------------------
// ğŸ§‘â€ğŸ’¼ ModÃ¨le : Contact (client ou prospect)
// --------------------------------
model Contact {
  id        String        @id @default(cuid()) // Identifiant unique
  name      String // Nom complet
  email     String        @unique // Email (unique)
  phone     String? // NumÃ©ro de tÃ©lÃ©phone
  company   String? // Entreprise
  notes     String? // Notes internes
  status    ContactStatus @default(PROSPECT) // Statut initial
  createdAt DateTime      @default(now()) // Date de crÃ©ation

  projects Project[] // Projets associÃ©s
}

// ------------------------------
// ğŸ” Enum : Statut dâ€™un projet
// ------------------------------
enum ProjectStatus {
  PENDING // Projet en rÃ©flexion ou en attente d'action
  QUOTE_SENT // Devis envoyÃ©, attente de rÃ©ponse
  ACCEPTED // Devis acceptÃ©, prÃªt Ã  Ãªtre dÃ©marrÃ©
  IN_PROGRESS // Projet en cours
  COMPLETED // Projet terminÃ©
  CANCELLED // Projet annulÃ©
}

// ---------------------------
// ğŸ“¦ ModÃ¨le : Projet liÃ© Ã  un contact
// ---------------------------
model Project {
  id          String        @id @default(cuid()) // Identifiant unique
  title       String // Titre du projet
  description String? // Description facultative
  amount      Float? // Montant prÃ©vu
  dueDate     DateTime? // Date dâ€™Ã©chÃ©ance
  status      ProjectStatus @default(PENDING) // Statut initial
  createdAt   DateTime      @default(now()) // Date de crÃ©ation

  contactId String // FK vers le contact
  contact   Contact @relation(fields: [contactId], references: [id]) // Relation directe
}
